[package]
name = "eldritch-libpivot"
version = "0.3.0"
edition = "2021"

[lib]
crate-type = ["cdylib", "rlib"]

[dependencies]
eldritch-core = { path = "../../eldritch-core" }
eldritch-macros = { path = "../../eldritch-macros" }
eldritch-libagent = { path = "../eldritch-libagent", optional = true }

anyhow = { workspace = true, optional = true }
async-recursion = { workspace = true, optional = true }
async-trait = { workspace = true, optional = true }
ipnetwork = { workspace = true, optional = true }
log = { workspace = true, optional = true }
russh = { workspace = true, optional = true }
russh-sftp = { workspace = true, optional = true }
russh-keys = { workspace = true, optional = true }
tokio = { workspace = true, features = ["macros", "rt-multi-thread", "fs"], optional = true }
pnet = { workspace = true, optional = true }
pb.workspace = true

[target.'cfg(not(target_os = "freebsd"))'.dependencies]
listeners = { workspace = true, optional = true }

[dev-dependencies]
tempfile = { workspace = true }
eldritch-libagent = { path = "../eldritch-libagent", features = ["fake_bindings"] }

[features]
default = ["stdlib"]
stdlib = ["eldritch-libagent", "anyhow", "async-recursion", "async-trait", "ipnetwork", "log", "russh", "russh-sftp", "russh-keys", "tokio", "pnet"]
fake_bindings = []
