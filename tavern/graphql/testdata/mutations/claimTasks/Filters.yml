state: |
  INSERT INTO `beacons` (id, name, identifier)
    VALUES (1337,"delightful-lich","EXISTING-BEACON");
  INSERT INTO `beacons` (id, name, identifier)
    VALUES (1338,"bad-boi","BAD-BEACON");
  INSERT INTO `tomes` (id, name, description, eldritch, hash, created_at, last_modified_at)
    VALUES (2000,"Test Tome","Used in a unit test :D","print('Hello World!')","abcdefg","2023-03-04 14:51:13","2023-03-04 14:51:13");
  INSERT INTO `quests` (id, quest_tome, name, created_at, last_modified_at)
    VALUES (7000,2000,"Test Quest","2023-03-04 14:51:13","2023-03-04 14:51:13");
  INSERT INTO `tasks` (id, task_beacon, quest_tasks, created_at, last_modified_at)
    VALUES (8000,1337,7000,"2023-03-04 14:51:13","2023-03-04 14:51:13");
  INSERT INTO `tasks` (id, task_beacon, quest_tasks, created_at, last_modified_at)
    VALUES (8001,1337,7000,"2023-03-04 14:51:13","2023-03-04 14:51:13");
  INSERT INTO `tasks` (id, task_beacon, quest_tasks, created_at, last_modified_at)
    VALUES (8002,1338,7000,"2023-03-04 14:51:13","2023-03-04 14:51:13");
  INSERT INTO `tasks` (id, task_beacon, quest_tasks, created_at, last_modified_at, claimed_at)
    VALUES (8003,1337,7000,"2023-03-04 14:51:13","2023-03-04 14:51:13","2023-03-04 14:51:13");
query: |
  mutation Filters($input: ClaimTasksInput!) {
    claimTasks(input: $input) {
      id
    }
  }
variables:
  input:
    principal: root
    hostname: some-machine
    hostPlatform: Linux
    beaconIdentifier: EXISTING-BEACON
    hostIdentifier: MY-HOST
    agentIdentifier: COOL-TEST

expected:
  claimTasks:
    - id: "8000"
    - id: "8001"