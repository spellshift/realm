state: |
  INSERT INTO `users` (id,oauth_id,photo_url,name,session_token,is_activated,is_admin)
    VALUES (5,"test_oauth_id","https://photos.com","test","secretToken",true,true);
  INSERT INTO `beacons` (id, name, identifier)
    VALUES (1337,"delightful-lich","ABCDEFG-123456");
  INSERT INTO `tomes` (id, name, description, eldritch, hash, created_at, last_modified_at)
    VALUES (2000,"Test Tome","Used in a unit test :D", "print('Hello World!')", "abcdefg", "2023-03-04 14:51:13", "2023-03-04 14:51:13");
  INSERT INTO `files` (id, tome_files, name, content, hash, created_at, last_modified_at)
    VALUES (3000,2000,"TestFile1", "hello world", "abcdefg", "2023-03-04 14:51:13", "2023-03-04 14:51:13");
  INSERT INTO `files` (id, tome_files, name, content, hash, created_at, last_modified_at)
    VALUES (3001,2000,"TestFile2", "some test", "abcdefg", "2023-03-04 14:51:13", "2023-03-04 14:51:13");

requestor:
  session_token: secretToken
query: |
  mutation CreateJobWithNoFiles($beaconIDs: [ID!]!, $input: CreateJobInput!) {
    createJob(beaconIDs:$beaconIDs, input:$input) {
      name
      tome {
        id
        name
        files {
          id
        }
      }
      tasks {
      beacon {
          id
        }
        job {
          name
        }
      }
      bundle {
        hash
      }
    }
  }
variables:
  beaconIDs:
    - 1337
  input:
    name: "WonderfulJob"
    tomeID: "2000"

expected:
  createJob:
    name: "WonderfulJob"
    tome:
      id: "2000"
      name: "Test Tome"
      files:
        - id: "3000"
        - id: "3001"
    tasks:
      - beacon:
          id: "1337"
        job:
          name: "WonderfulJob"
    bundle:
      hash: "4469e68357aa4abc056aa32c248c0912c9f921aba75a960725b2070bc1fad130"