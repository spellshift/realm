package namegen

import (
	"crypto/rand"
	"fmt"
	"log/slog"
	"math/big"
	"time"

	"realm.pub/tavern/internal/ent"
)

var (
	adjectives = [...]string{
		"absolute",
		"accomplished",
		"accurate",
		"acrobatic",
		"admiring",
		"adoring",
		"adorable",
		"affectionate",
		"agitated",
		"amazing",
		"angry",
		"awesome",
		"ballin",
		"beautiful",
		"beloved",
		"blissful",
		"bold",
		"boring",
		"brave",
		"busy",
		"celebrated",
		"charming",
		"clever",
		"compassionate",
		"competent",
		"condescending",
		"confident",
		"cool",
		"cranky",
		"crazy",
		"dazzling",
		"determined",
		"distracted",
		"dreamy",
		"eager",
		"ecstatic",
		"elastic",
		"elated",
		"elegant",
		"eloquent",
		"epic",
		"exciting",
		"fervent",
		"festive",
		"flamboyant",
		"focused",
		"friendly",
		"frosty",
		"funny",
		"gallant",
		"gifted",
		"goofy",
		"gracious",
		"great",
		"happy",
		"hardcore",
		"heuristic",
		"hopeful",
		"hungry",
		"infallible",
		"inspiring",
		"intelligent",
		"interesting",
		"jolly",
		"jovial",
		"keen",
		"kind",
		"laughing",
		"loving",
		"lucid",
		"magical",
		"modest",
		"musing",
		"mystifying",
		"naughty",
		"nervous",
		"nice",
		"nifty",
		"nostalgic",
		"objective",
		"optimistic",
		"peaceful",
		"pedantic",
		"pensive",
		"practical",
		"priceless",
		"quantum",
		"quality",
		"quirky",
		"quizzical",
		"rare",
		"recursing",
		"relaxed",
		"reverent",
		"romantic",
		"sad",
		"serene",
		"sharp",
		"silly",
		"sleepy",
		"splendiforous",
		"spooky",
		"stoic",
		"strange",
		"stupefied",
		"suspicious",
		"sweet",
		"tender",
		"thirsty",
		"trusting",
		"unruffled",
		"upbeat",
		"unusual",
		"vibrant",
		"vigilant",
		"vigorous",
		"wizardly",
		"wonderful",
		"xenodochial",
		"youthful",
		"zealous",
		"zen",
	}

	nouns = [...]string{
		"aboleth",
		"acolyte",
		"dragon",
		"elemental",
		"allosaurus",
		"androsphinx",
		"animated-armor",
		"ankheg",
		"ankylosaurus",
		"archmage",
		"assassin",
		"awakened-shrub",
		"awakened-tree",
		"axe-beak",
		"azer",
		"baboon",
		"badger",
		"balor",
		"bandit",
		"bandit-captain",
		"banshee",
		"barbed-devil",
		"basilisk",
		"bat",
		"bearded-devil",
		"behir",
		"berserker",
		"black-bear",
		"wyrmling",
		"black-pudding",
		"blink-dog",
		"blood-hawk",
		"boar",
		"bone-devil",
		"brown-bear",
		"bugbear",
		"bulette",
		"camel",
		"cat",
		"centaur",
		"chain-devil",
		"chimera",
		"chuul",
		"clay-golem",
		"cloaker",
		"cloud-giant",
		"cockatrice",
		"commoner",
		"constrictor-snake",
		"couatl",
		"crab",
		"crocodile",
		"cult-fanatic",
		"cultist",
		"cyclops",
		"darkmantle",
		"death-dog",
		"gnome",
		"deer",
		"deva",
		"dire-wolf",
		"djinni",
		"doppelganger",
		"draft-horse",
		"dragon-turtle",
		"dretch",
		"drider",
		"drow",
		"druid",
		"dryad",
		"duergar",
		"dust-mephit",
		"eagle",
		"efreeti",
		"elephant",
		"elk",
		"erinyes",
		"ettercap",
		"ettin",
		"fire-giant",
		"flameskull",
		"flesh-golem",
		"flying-snake",
		"flying-sword",
		"frog",
		"frost-giant",
		"gargoyle",
		"gelatinous-cube",
		"ghast",
		"ghost",
		"ghoul",
		"ape",
		"glabrezu",
		"gladiator",
		"gnoll",
		"goat",
		"goblin",
		"gorgon",
		"gray-ooze",
		"green-hag",
		"grick",
		"griffon",
		"grimlock",
		"guard",
		"guardian-naga",
		"gynosphinx",
		"harpy",
		"hawk",
		"hell-hound",
		"hezrou",
		"hill-giant",
		"hippogriff",
		"hobgoblin",
		"homunculus",
		"horned-devil",
		"hunter-shark",
		"hydra",
		"hyena",
		"ice-devil",
		"ice-mephit",
		"imp",
		"invisible-stalker",
		"jackal",
		"killer-whale",
		"knight",
		"kobold",
		"kraken",
		"lamia",
		"lemure",
		"lich",
		"lion",
		"lizard",
		"lizardfolk",
		"mage",
		"magma-mephit",
		"magmin",
		"mammoth",
		"manticore",
		"marilith",
		"mastiff",
		"medusa",
		"merfolk",
		"merrow",
		"mimic",
		"minotaur",
		"mule",
		"mummy",
		"mummy-lord",
		"nalfeshnee",
		"night-hag",
		"nightmare",
		"noble",
		"nothic",
		"ochre-jelly",
		"octopus",
		"ogre",
		"oni",
		"orc",
		"otyugh",
		"owl",
		"owlbear",
		"panther",
		"pegasus",
		"pit-fiend",
		"planetar",
		"plesiosaurus",
		"polar-bear",
		"pony",
		"priest",
		"pseudodragon",
		"pteranodon",
		"quasit",
		"quipper",
		"rakshasa",
		"rat",
		"raven",
		"reef-shark",
		"remorhaz",
		"rhinoceros",
		"roc",
		"roper",
		"rust-monster",
		"saber-toothed-tiger",
		"sahuagin",
		"salamander",
		"satyr",
		"scorpion",
		"scout",
		"sea-hag",
		"sea-horse",
		"shadow",
		"shambling-mound",
		"shield-guardian",
		"shrieker",
		"skeleton",
		"solar",
		"spectator",
		"specter",
		"spider",
		"spirit-naga",
		"sprite",
		"spy",
		"stirge",
		"strahd",
		"succubus",
		"incubus",
		"tarrasque",
		"thug",
		"tiger",
		"tortle",
		"treant",
		"tribal-warrior",
		"triceratops",
		"troll",
		"twig-blight",
		"tyrannosaurus-rex",
		"unicorn",
		"vampire",
		"vampire-spawn",
		"veteran",
		"vrock",
		"vulture",
		"warhorse",
		"weasel",
		"werebear",
		"wereboar",
		"wererat",
		"weretiger",
		"werewolf",
		"wight",
		"will-o-wisp",
		"winter-wolf",
		"wolf",
		"worg",
		"wraith",
		"wyvern",
		"xorn",
		"yeti",
		"zombie",
	}

	noun_halloween = [...]string{
		"Dracula",
		"Grim-Reaper",
		"Halloween",
		"October",
		"Spooktober",
		"Transylvania",
		"Wolfman",
		"afterlife",
		"agony",
		"apparition",
		"apple-cider",
		"apples",
		"banshee",
		"bats",
		"beast",
		"black-cats",
		"blood",
		"bloodsucker",
		"bogeyman",
		"bone",
		"bones",
		"bonfire",
		"brains",
		"broom",
		"broomstick",
		"burial",
		"cackle",
		"cadaver",
		"candles",
		"candy",
		"candy-apples",
		"candy-bowl",
		"candy-collection",
		"candy-corn",
		"cape",
		"carcass",
		"cat",
		"cauldron",
		"cemetery",
		"children",
		"chills",
		"chocolates",
		"cloak",
		"cobweb",
		"coffin",
		"corpse",
		"costume",
		"coven",
		"creature",
		"crematorium",
		"crow",
		"crypt",
		"darkness",
		"death",
		"demon",
		"devils",
		"disguise",
		"doom",
		"doorbell",
		"enchantment",
		"evil",
		"evil-spirits",
		"exorcism",
		"eye-of-newt",
		"eyeballs",
		"eyeballs",
		"face-paint",
		"fairy",
		"fairy",
		"fall",
		"fangs",
		"fangs",
		"fantasy",
		"fantasy",
		"fear",
		"filth",
		"fire",
		"fireworks",
		"flashlight",
		"flashlight",
		"fog",
		"fog-machine",
		"frankenstein",
		"fright",
		"fright",
		"fright",
		"frightening",
		"frightful",
		"full-moon",
		"funeral",
		"games",
		"ghost",
		"ghost",
		"ghost-stories",
		"ghost-story",
		"ghoul",
		"ghoul",
		"goblin",
		"goblin",
		"goodies",
		"goop",
		"gore",
		"gourds",
		"grave",
		"graveyard",
		"grimace",
		"guts",
		"happy-haunting",
		"haunted-house",
		"haunting",
		"hayride",
		"headless-horseman",
		"hell",
		"hellhound",
		"hobgoblin",
		"hocus-pocus",
		"horror",
		"horror-movie",
		"incantation",
		"infestation",
		"intestines",
		"jack-o-lantern",
		"levitation",
		"lightening",
		"magic",
		"magic-potion",
		"magic-tricks",
		"make-up",
		"malady",
		"mask",
		"mausoleum",
		"midnight",
		"midnight-magic",
		"mischief",
		"mist",
		"monster",
		"monster-mash",
		"moonlight",
		"mummy",
		"murder",
		"murder",
		"mystery",
		"mystery-mansion",
		"necromancy",
		"neighborhood",
		"night-of-fright",
		"nightfall",
		"nightmare",
		"noose",
		"occult",
		"party",
		"perversion",
		"phantasm",
		"phantom",
		"phenomena",
		"pointy-shoes",
		"poison",
		"poltergeist",
		"potion",
		"prank",
		"prankster",
		"pumpkin",
		"punch",
		"quagmire",
		"raven",
		"remains",
		"safety",
		"scarecrow",
		"scaredy-cat",
		"scary-stories",
		"scary-story",
		"screams",
		"seance",
		"senses",
		"shrew",
		"shroud",
		"skeleton-crew",
		"skeletons",
		"skulls",
		"slime",
		"sorceress",
		"sorcery",
		"specter",
		"spell",
		"spell-book",
		"spider",
		"spider-cider",
		"spider-web",
		"spirits",
		"spooking",
		"spooky-sights",
		"superstition",
		"swamp",
		"sweets",
		"tarantula",
		"terror",
		"thorns",
		"toad",
		"tomb",
		"tombstone",
		"treat",
		"treat-bag",
		"trick",
		"tricks",
		"troll",
		"vampire",
		"warlock",
		"warts",
		"werewolf",
		"wig",
		"wind",
		"witch",
		"wizardry",
		"worms",
		"wraith",
		"zombie",
	}

	adjectives_halloween = [...]string{
		"abominable",
		"afflicted",
		"ancient",
		"ashen",
		"autumn-inspired",
		"barbed",
		"batty",
		"bewitching",
		"black",
		"bloodcurdling",
		"bloody",
		"bodiless",
		"bone-chilling",
		"boo-licious",
		"boo-tiful",
		"chilling",
		"corpselike",
		"corrupt",
		"costumed",
		"cowardly",
		"crawly",
		"creeped-out",
		"creepy",
		"creepy",
		"crude",
		"cruel",
		"cursed",
		"damned",
		"damp",
		"dank",
		"dark",
		"dastardly",
		"dead",
		"deadly",
		"decapitated",
		"decayed",
		"deceased",
		"demonic",
		"depraved",
		"devilish",
		"dire",
		"dirty",
		"disembodied",
		"disguised",
		"distressing",
		"dreadful",
		"dressed-up",
		"eerie",
		"enchanted",
		"evil",
		"fang-tastic",
		"fear-inspiring",
		"fiery",
		"frightening",
		"frightful",
		"fun",
		"ghostly",
		"ghoulish",
		"glow-in-the-dark",
		"gooey",
		"gory",
		"goth",
		"gross",
		"gruesome",
		"gruesome",
		"haggard",
		"hair-raising",
		"haunted",
		"haunting",
		"heinous",
		"horrible",
		"howling",
		"icky",
		"inhuman",
		"lewd",
		"looming",
		"lurid",
		"lurking",
		"macabre",
		"magical",
		"make-believe",
		"malformed",
		"masked",
		"melancholy",
		"merciless",
		"mischievous",
		"monstr",
		"morbid",
		"morose",
		"mortal",
		"muddy",
		"mummified",
		"mysterious",
		"mystical",
		"nasty",
		"nauseous",
		"nighttime",
		"nocturnal",
		"noxious",
		"occult",
		"offensive",
		"ominous",
		"orange",
		"otherworldly",
		"pagan",
		"panicked",
		"peculiar",
		"perilous",
		"perverted",
		"pestilent",
		"possessed",
		"preternatural",
		"prickly",
		"profane",
		"pungent",
		"putrid",
		"rabid",
		"rampant",
		"rank",
		"rattling",
		"repulsive",
		"revolting",
		"satanic",
		"savage",
		"scared",
		"scary",
		"scream-worthy",
		"screaming",
		"seeping",
		"shadowy",
		"shocking",
		"shrill",
		"spell-binding",
		"spine-chilling",
		"spine-tingling",
		"spook-takular",
		"spookalicious",
		"spooked",
		"spooky",
		"squeamish",
		"startling",
		"sticky",
		"stormy",
		"strange",
		"strange",
		"sullen",
		"supernatural",
		"superstitious",
		"superstitious",
		"tarnished",
		"terrified",
		"terrifying",
		"thorny",
		"thrilling",
		"tragic",
		"treacherous",
		"trembling",
		"undead",
		"unearthly",
		"unnerving",
		"up-to-no-good",
		"wailing",
		"warped",
		"waxy",
		"weary",
		"weird",
		"wicked",
		"wild",
		"witch-approved",
		"witchy",
		"wormy",
		"wretched",
	}
)

// NewSimple generates a random name with one adjective and one noun.
func NewSimple() string {
	adj, noun := getRandomAdjNoun()
	return fmt.Sprintf("%s-%s", adj, noun)
}

// New generates a random name with two adjectives and one noun.
func New() string {
	adj1, adj2, noun := getRandomAdjAdjNoun()
	return fmt.Sprintf("%s-%s-%s", adj1, adj2, noun)
}

// NewComplex generates a random name with two adjectives, one noun, and a number.
func NewComplex() string {
	adj1, adj2, noun := getRandomAdjAdjNoun()
	num := newRandInt(10000000)
	return fmt.Sprintf("%s-%s-%s-%d", adj1, adj2, noun, num)
}

// Helper function to get a random adjective and noun.
func getRandomAdjNoun() (string, string) {
	var adj, noun string

	if time.Now().Month() == time.October {
		adj = adjectives_halloween[newRandInt(int64(len(adjectives_halloween)))]
		noun = noun_halloween[newRandInt(int64(len(noun_halloween)))]
	} else {
		adj = adjectives[newRandInt(int64(len(adjectives)))]
		noun = nouns[newRandInt(int64(len(nouns)))]
	}
	return adj, noun
}

// Helper function to get two random adjectives and a noun.
func getRandomAdjAdjNoun() (string, string, string) {
	adj1, noun := getRandomAdjNoun()
	var adj2 string
	if time.Now().Month() == time.October {
		adj2 = adjectives_halloween[newRandInt(int64(len(adjectives_halloween)))]
	} else {
		adj2 = adjectives[newRandInt(int64(len(adjectives)))]
	}
	return adj1, adj2, noun
}

// cryptoRandSecure is not always secure, if it errors we return 1337 % max
func newRandInt(max int64) int64 {
	nBig, err := rand.Int(rand.Reader, big.NewInt(max))
	if err != nil {
		slog.Error("failed to generate random number", "err", err, "default_value", 1337%max)
		return 1337 % max
	}
	return nBig.Int64()
}

func IsCollision(beacons []*ent.Beacon, str string) bool {
	for _, v := range beacons {
		if v.Name == str {
			return true
		}
	}
	return false
}
